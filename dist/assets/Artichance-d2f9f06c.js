import{r as h,a as M,j as d,T as w,s as b,A as x}from"./index-dcd44d10.js";import{d as B}from"./Calculate-d6cc4e77.js";import{u as S}from"./Main-f35dbbee.js";import{B as T}from"./Button-53de17bf.js";import"./FastContext-b221ac23.js";const A=b(T)(({theme:n})=>({color:n.palette.getContrastText(x[700]),backgroundColor:x[700],"&:hover":{backgroundColor:x[900]},height:"40px"}));function g(n){let e=1;for(let t=2;t<=n;t++)e*=t;return e}function k(n,e){if(e.includes(n[1]))return 0;var t=1,r=[150,150,150,100,100,100,100,100,75,75];n[1]<10&&n[1]>=0&&(r[n[1]]=0);for(let c=0;c<e.length;c++)t*=r[e[c]]/r.reduce((a,u)=>a+u,0),r[e[c]]=0;return t}function R(n,e){if(e.includes(-1)===!1)return k(n,e);{var t=0;let r=+(e[0]===-1)*10+ +(e[0]!==-1),c=+(e[1]===-1)*10+ +(e[1]!==-1),a=+(e[2]===-1)*10+ +(e[2]!==-1),u=+(e[3]===-1)*10+ +(e[3]!==-1);for(let s=0;s<r;s++)for(let l=0;l<c;l++)for(let o=0;o<a;o++)for(let i=0;i<u;i++)e[0]=+(r===1)*e[0]+ +(r!==1)*s,e[1]=+(c===1)*e[1]+ +(c!==1)*l,e[2]=+(a===1)*e[2]+ +(a!==1)*o,e[3]=+(u===1)*e[3]+ +(u!==1)*i,t+=k(n,e);return t}}function D(n){var e=.2,t;switch(n[0]){default:break;case 2:{t=[0,0,0,1334,1333,1333,500,500,0,0];let r=t[n[1]]/t.reduce((c,a)=>c+a,0);e*=r;break}case 3:{t=[0,0,0,767,767,766,0,100,0,0,200,200,200,200,200,200,200,200];let r=t[n[1]]/t.reduce((c,a)=>c+a,0);e*=r;break}case 4:{t=[0,0,0,1100,1100,1100,0,200,500,500,500];let r=t[n[1]]/t.reduce((c,a)=>c+a,0);e*=r;break}}return e}function y(n){var e=n.reduce((r,c)=>r+c,0),t=g(e);for(let r=0;r<n.length;r++)t/=g(n[r]);return t*=Math.pow(1/4,e),t}function E(n,e){var t=0,r;for(let c=e[0][0];c<=e[0][1];c++)for(let a=e[1][0];a<=e[1][1]&&!(c+a>5);a++)for(let u=e[2][0];u<=e[2][1]&&!(c+a+u>5);u++)r=5-c-a-u,r>=e[3][0]&&r<=e[3][1]&&(n[1]===0||n[1]===1)&&(t+=y([c,a,u,r])*.25),r=4-c-a-u,r>=e[3][0]&&r<=e[3][1]&&(n[1]===0||n[1]===2)&&(t+=y([c,a,u,r])*.75);return t}function q(){const[n,e]=S(l=>l),t=h.useRef(n.artichance),r=n.resin[1]/n.resin[0];var c=n.resin[0]==40?1:1.07;const a=h.useCallback((l,o,i)=>{if(l===1)t.current.final+=R(i,o.slice())/g(o.filter(f=>f===-1).length);else{a(l-1,o,i);for(let f=0;f<l-1;f++)l%2===0?[o[f],o[l-1]]=[o[l-1],o[f]]:[o[0],o[l-1]]=[o[l-1],o[0]],a(l-1,o,i)}},[t.current]),u=h.useCallback(()=>{var l=[],o=[],i=0,f=0;const m=t.current.final,v=1/r,C=1/v*Math.max(1,Math.round(1e-5/m));for(;i<=.99;)i=1-Math.exp(f*Math.log(1-m)),l.push(i*100),o.push(f*v),f+=C;e(j=>{var p={...j};return p.plotdata.x=o,p.plotdata.y=l,p})},[t.current,r,e]),s=h.useCallback(()=>{t.current.final=0,a(n.substats.length,n.substats.slice(),n.mainstats.slice()),t.current.permut=t.current.final,t.current.mains=D(n.mainstats),t.current.final*=t.current.mains,t.current.upgrade=E(n.starter,n.slidervals),t.current.final*=t.current.upgrade,t.current.set=1/n.starter[0],t.current.final/=n.starter[0],t.current.final*=c,u(),e(l=>{var o={...l};return o.artichance={...t.current},o})},[t.current,n,e]);return M(A,{variant:"contained",onClick:s,sx:{pl:1},children:[d(B,{}),d(w,{variant:"body1",letterSpacing:1,sx:{display:"flex",alignItems:"center",pl:1},children:d("strong",{children:"calculate"})})]})}export{q as default};
